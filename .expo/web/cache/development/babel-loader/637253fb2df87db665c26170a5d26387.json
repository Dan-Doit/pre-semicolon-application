{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _taggedTemplateLiteralLoose from \"@babel/runtime/helpers/taggedTemplateLiteralLoose\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\Final_Project\\\\semicolon_app\\\\screens\\\\Photo\\\\SelectPhoto.js\";\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteralLoose([\"\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteralLoose([\"\\n  justify-content: center;\\n  align-items: center;\\n  flex: 1;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState, useEffect } from \"react\";\nimport * as Permissions from \"expo-permissions\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport * as MediaLibrary from \"expo-media-library\";\nimport styled from \"styled-components\";\nimport Loader from \"../../components/Loader\";\nvar View = styled.View(_templateObject());\nvar Text = styled.Text(_templateObject2());\nexport default (function () {\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      hasPermission = _useState4[0],\n      setHasPermission = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      selected = _useState6[0],\n      setSelected = _useState6[1];\n\n  var _useState7 = useState(),\n      _useState8 = _slicedToArray(_useState7, 2),\n      allPhotos = _useState8[0],\n      setAllPhotos = _useState8[1];\n\n  var getPhotos = function getPhotos() {\n    var _await$MediaLibrary$g, assets, _assets, firstPhoto;\n\n    return _regeneratorRuntime.async(function getPhotos$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(MediaLibrary.getAssetsAsync());\n\n          case 3:\n            _await$MediaLibrary$g = _context.sent;\n            assets = _await$MediaLibrary$g.assets;\n            _assets = _slicedToArray(assets, 1), firstPhoto = _assets[0];\n            setSelected(firstPhoto);\n            setAllPhotos(assets);\n            _context.next = 13;\n            break;\n\n          case 10:\n            _context.prev = 10;\n            _context.t0 = _context[\"catch\"](0);\n            console.log(_context.t0);\n\n          case 13:\n            _context.prev = 13;\n            setLoading(false);\n            return _context.finish(13);\n\n          case 16:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 10, 13, 16]], Promise);\n  };\n\n  var askPermission = function askPermission() {\n    var _await$Permissions$as, status;\n\n    return _regeneratorRuntime.async(function askPermission$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(Permissions.askAsync(Permissions.CAMERA_ROLL));\n\n          case 3:\n            _await$Permissions$as = _context2.sent;\n            status = _await$Permissions$as.status;\n\n            if (status === \"granted\") {\n              setHasPermission(true);\n              getPhotos();\n            }\n\n            _context2.next = 12;\n            break;\n\n          case 8:\n            _context2.prev = 8;\n            _context2.t0 = _context2[\"catch\"](0);\n            console.log(_context2.t0);\n            hasPermission(false);\n\n          case 12:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[0, 8]], Promise);\n  };\n\n  useEffect(function () {\n    askPermission();\n  }, []);\n  return React.createElement(View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 5\n    }\n  }, loading ? React.createElement(Loader, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }) : React.createElement(View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }, hasPermission ? React.createElement(Image, {\n    style: {\n      width: 100,\n      height: 100\n    },\n    source: {\n      uri: selected.uri\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }\n  }) : null));\n});","map":{"version":3,"sources":["D:/Final_Project/semicolon_app/screens/Photo/SelectPhoto.js"],"names":["React","useState","useEffect","Permissions","MediaLibrary","styled","Loader","View","Text","loading","setLoading","hasPermission","setHasPermission","selected","setSelected","allPhotos","setAllPhotos","getPhotos","getAssetsAsync","assets","firstPhoto","console","log","askPermission","askAsync","CAMERA_ROLL","status","width","height","uri"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAO,KAAKC,WAAZ,MAA6B,kBAA7B;;AAEA,OAAO,KAAKC,YAAZ,MAA8B,oBAA9B;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,OAAOC,MAAP;AAEA,IAAMC,IAAI,GAAGF,MAAM,CAACE,IAAV,mBAAV;AAMA,IAAMC,IAAI,GAAGH,MAAM,CAACG,IAAV,oBAAV;AAEA,gBAAe,YAAM;AAAA,kBACWP,QAAQ,CAAC,IAAD,CADnB;AAAA;AAAA,MACZQ,OADY;AAAA,MACHC,UADG;;AAAA,mBAEuBT,QAAQ,CAAC,KAAD,CAF/B;AAAA;AAAA,MAEZU,aAFY;AAAA,MAEGC,gBAFH;;AAAA,mBAGaX,QAAQ,EAHrB;AAAA;AAAA,MAGZY,QAHY;AAAA,MAGFC,WAHE;;AAAA,mBAIeb,QAAQ,EAJvB;AAAA;AAAA,MAIZc,SAJY;AAAA,MAIDC,YAJC;;AAKnB,MAAMC,SAAS,GAAG,SAAZA,SAAY;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CAEWb,YAAY,CAACc,cAAb,EAFX;;AAAA;AAAA;AAENC,YAAAA,MAFM,yBAENA,MAFM;AAAA,qCAGOA,MAHP,MAGPC,UAHO;AAIdN,YAAAA,WAAW,CAACM,UAAD,CAAX;AACAJ,YAAAA,YAAY,CAACG,MAAD,CAAZ;AALc;AAAA;;AAAA;AAAA;AAAA;AAOdE,YAAAA,OAAO,CAACC,GAAR;;AAPc;AAAA;AASdZ,YAAAA,UAAU,CAAC,KAAD,CAAV;AATc;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAlB;;AAYA,MAAMa,aAAa,GAAG,SAAhBA,aAAgB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CAEOpB,WAAW,CAACqB,QAAZ,CAAqBrB,WAAW,CAACsB,WAAjC,CAFP;;AAAA;AAAA;AAEVC,YAAAA,MAFU,yBAEVA,MAFU;;AAGlB,gBAAIA,MAAM,KAAK,SAAf,EAA0B;AACxBd,cAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACAK,cAAAA,SAAS;AACV;;AANiB;AAAA;;AAAA;AAAA;AAAA;AAQlBI,YAAAA,OAAO,CAACC,GAAR;AACAX,YAAAA,aAAa,CAAC,KAAD,CAAb;;AATkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAtB;;AAYAT,EAAAA,SAAS,CAAC,YAAM;AACdqB,IAAAA,aAAa;AACd,GAFQ,EAEN,EAFM,CAAT;AAGA,SACE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGd,OAAO,GACN,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADM,GAGN,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGE,aAAa,GACZ,oBAAC,KAAD;AACE,IAAA,KAAK,EAAE;AAAEgB,MAAAA,KAAK,EAAE,GAAT;AAAcC,MAAAA,MAAM,EAAE;AAAtB,KADT;AAEE,IAAA,MAAM,EAAE;AAAEC,MAAAA,GAAG,EAAEhB,QAAQ,CAACgB;AAAhB,KAFV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADY,GAKV,IANN,CAJJ,CADF;AAgBD,CAhDD","sourcesContent":["  \r\nimport React, { useState, useEffect } from \"react\";\r\nimport * as Permissions from \"expo-permissions\";\r\nimport { Image } from \"react-native\";\r\nimport * as MediaLibrary from \"expo-media-library\";\r\nimport styled from \"styled-components\";\r\nimport Loader from \"../../components/Loader\";\r\n\r\nconst View = styled.View`\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex: 1;\r\n`;\r\n\r\nconst Text = styled.Text``;\r\n\r\nexport default () => {\r\n  const [loading, setLoading] = useState(true);\r\n  const [hasPermission, setHasPermission] = useState(false);\r\n  const [selected, setSelected] = useState();\r\n  const [allPhotos, setAllPhotos] = useState();\r\n  const getPhotos = async () => {\r\n    try {\r\n      const { assets } = await MediaLibrary.getAssetsAsync();\r\n      const [firstPhoto] = assets;\r\n      setSelected(firstPhoto);\r\n      setAllPhotos(assets);\r\n    } catch (e) {\r\n      console.log(e);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  const askPermission = async () => {\r\n    try {\r\n      const { status } = await Permissions.askAsync(Permissions.CAMERA_ROLL);\r\n      if (status === \"granted\") {\r\n        setHasPermission(true);\r\n        getPhotos();\r\n      }\r\n    } catch (e) {\r\n      console.log(e);\r\n      hasPermission(false);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    askPermission();\r\n  }, []);\r\n  return (\r\n    <View>\r\n      {loading ? (\r\n        <Loader />\r\n      ) : (\r\n        <View>\r\n          {hasPermission ? (\r\n            <Image\r\n              style={{ width: 100, height: 100 }}\r\n              source={{ uri: selected.uri }}\r\n            />\r\n          ) : null}\r\n        </View>\r\n      )}\r\n    </View>\r\n  );\r\n};"]},"metadata":{},"sourceType":"module"}